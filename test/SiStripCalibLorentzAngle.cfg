process Test = {

untracked PSet maxEvents = {untracked int32 input = 1}    
     source = EmptySource {
         untracked uint32 firstRun = 1 
         untracked uint32 numberEventsInRun = 1
     }
    
    service = MessageLogger {
	untracked vstring destinations = { "write_langle_geom_ideal_blob.log" }
	untracked PSet write_langle_geom_ideal_blob.log = { untracked string threshold = "INFO" }
    }
    
    #include "CalibTracker/Configuration/data/SiStripLorentzAngle/SiStripLorentzAngle_Fake.cff"
    include "Configuration/StandardSequences/data/MagneticField.cff"
    include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
    replace GlobalTag.globaltag = "1PB_V2_RECO::All"
        


    #service = DaqMonitorROOTBackEnd{}
    include "DQMServices/Core/data/DQM.cfg"
    replace DQM.collectorHost = ""
    
    #Geometry
    #geom_mtcc      include "Geometry/CMSCommonData/data/cmsMTCCGeometryXML.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    
    es_module = TrackerGeometricDetESModule {bool fromDDD = true}
    #es_module = TrackerDigiGeometryESModule {bool fromDDD = true}
    
    service = Timing {}

    include "CondCore/DBCommon/data/CondDBCommon.cfi"
    replace CondDBCommon.connect = "sqlite_file:LA_CSA08_S156_align.db"    
    #replace CondDBCommon.catalog = "file:/tmp/sfrosali/langle_geom_ideal.xml"

    service = PoolDBOutputService {
    using CondDBCommon
    VPSet toPut={ { string record = "SiStripLorentzAngleRcd"   string tag ="SiStrip_LorentzAngle_MinBias_CSA08_S156_mc"} }    
    }
    
    include "CalibTracker/SiStripLorentzAngle/data/SiStripCalibLorentzAngle.cfi"
    replace sistripLACalib.ModuleFit2ITXMin = -0.4
    replace sistripLACalib.ModuleFit2ITXMax = 0.1
    replace sistripLACalib.FitCuts_Entries = 1000
    replace sistripLACalib.FitCuts_p0 = 0
    replace sistripLACalib.FitCuts_p1 = 0.1
    replace sistripLACalib.FitCuts_p2 = 1
    replace sistripLACalib.FitCuts_chi2 = 30
    
    #replace sistripLACalib.fileName ="Summary_Histos.root"
    replace sistripLACalib.fileName ="Summary_new_bin.root"
       path p = { sistripLACalib }
        
       module print = AsciiOutputModule {}
       endpath ep = { print }
}
