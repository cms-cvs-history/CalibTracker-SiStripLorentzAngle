process analyze = 
{
  
untracked PSet maxEvents = {untracked int32 input = 50} 
 
service = MessageLogger {

   untracked vstring destinations = { "debug_test_CSA08" }
   
    untracked PSet debug = { untracked string threshold = "DEBUG"    } 
    untracked PSet cout = { untracked string threshold = "DEBUG"    } 
    untracked vstring debugModules =  { "read" , "sistripLorentzAngle"
              		              }
  }
  
 
  source = PoolSource
    {	  
          untracked vstring fileNames = 
     	       {
	          # Minbias CSA08
		                
               "rfio:/castor/cern.ch/cms/store/relval/2008/4/26/relval-TestCSA08MinBias-TESTESTEST-STARTUP_V2/0004/043E265C-0714-DD11-B592-003048767FAB.root"
              
	       }
     	   
    }
    
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  #Reconstruction
  include "Configuration/StandardSequences/data/Reconstruction.cff"
  
  #FakeConditions
  include "Configuration/StandardSequences/data/FakeConditions.cff"
  
  #Refitter
  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
  
  module trackrefitter = TrackRefitter 
 {
   string Fitter = "FittingSmootherRK"   
 
   string Propagator = "RungeKuttaTrackerPropagator"
 
   #InputTag src = generalTracks
   InputTag src = ALCARECOSiStripCalMinBias
   InputTag beamSpot      = offlineBeamSpot
   string TTRHBuilder = "WithTrackAngle"
   bool TrajectoryInEvent = true
   string constraint = ""
   string AlgorithmName = "ctf"
   bool useHitsSplitting = false
 }
          
  #service = DaqMonitorROOTBackEnd{}
  include "DQMServices/Core/data/DQM.cfg"
  replace DQM.collectorHost = ""
  
  #SiStripLAProfileBooker
  
  include "CalibTracker/SiStripLorentzAngle/data/SiStripLAProfileBooker.cfi"  
  replace sistripLorentzAngle.Tracks= "trackrefitter"
  
  replace sistripLorentzAngle.fileName="test_CSA08.root"
  replace sistripLorentzAngle.treeName="LATrees_test_CSA08.root"
  replace sistripLorentzAngle.fitName="fit_test_CSA08"
    
  path recotracks = {trackrefitter}
  path LorentzAngle = {sistripLorentzAngle}
 	
  schedule = {recotracks, LorentzAngle}
  
  module print = AsciiOutputModule {}
  endpath ep = { print }
   
}
